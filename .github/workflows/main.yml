name: "Test"
on:
  [push, pull_request]

jobs:
  test:
    name: "Power Test"
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v2

    # - name: ZAP Scan
    #   uses: zaproxy/action-baseline@v0.4.0
    #   with:
    #     token: ${{ secrets.GITHUB_TOKEN }}
    #     docker_name: 'owasp/zap2docker-stable'
    #     target: 'http://testhtml5.vulnweb.com'

    # Part 1
    # - name: Docker run - OWASP ZAP Baseline Scan
    #     # This ZAP Scan is ran from a Docker Image
    #     # The command below is basically the exact command that is used to run ZAP Scan
    #     # from a Docker Image
    #     # More details here: https://www.zaproxy.org/docs/docker/about/
    #   run: |
    #     docker run -v $(pwd):/zap/wrk:rw -t owasp/zap2docker-stable zap-baseline.py -t http://testhtml5.vulnweb.com -g alerts.conf -J test2.json
        
    # Part 2
#     - name: Python Power
#       uses: actions/setup-python@v2
#       with:
#         python-version: 3.9
    
#     - name: Install Dependencies
#       run: |
#         pip install jira
#         pip install click
    
#     - name: Python Test
#     - run: python power.py
    
    - name: OWASP ZAP Baseline Scan
      # You may pin to the exact commit or the version.
      # uses: zaproxy/action-baseline@acd8e997263688cb49cb5ff8247a4b2758c548ab
      uses: zaproxy/action-baseline@v0.4.0
      with:
      # GitHub Token to create issues in the repository
      token: # optional, default is ${{ github.token }}
      # Target URL
      target: http://testhtml5.vulnweb.com
      # Relative path of the ZAP configuration file
      rules_file_name: # optional
      # The Docker file to be executed
      docker_name: # default is owasp/zap2docker-stable
      # Additional command line options
      cmd_options: # optional
      # The title for the GitHub issue to be created
      issue_title: # optional, default is ZAP Scan Baseline Report
      # The action status will be set to fail if ZAP identifies any alerts during the baseline scan
      fail_action: # optional
